<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฌุฏุงุฑ ุงูุณุนุงุฏุฉ ุงูุชูุงุนูู</title>
    <!-- Google Fonts: IBM Plex Sans Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>/* ุงูููุฏ ุงููุงูู ููุง */</style>
</head>
<body>
    <div class="page-wrapper">
        <div class="main-letter">
            <h1>ุฅุฒููู ูุง ุฌูุงุนุฉ...</h1>
            <p>ุจูุชุจ ุงูุฑุณุงูุฉ ุฏู ูุฃูุง ูุณู ุทุงูุน ูู ุขุฎุฑ ุงูุชุญุงู...</p>
            <p>ุฃูุง ูููุชุด ุฃุนุฑู ุงูููุ ูุฏู ุทุจูุนูุ ุจุณ ุงูุฌููู ุจุฌุฏ ุฅู ูุงุณ ูุชูุฑ ุนุฑูุชูู...</p>
            <p>ุงูุณูุฉ ุฏู ุฎูุชูู ุฃูุชุดู ูุฏ ุฅูู ุงููุงุณ ุงูุญููุฉ ุญูุงูููุง ุจุชุตูุน ุงููุฑู...</p>
            <p>ุงููู ูุงุช ูุด ููุงูุฉโฆ ุฏู ูุงูุช ุฃูู ุณูุฉ ูู ูุดูุงุฑ ุนูุฑู 4 ุณููู...</p>
            <p class="signature">ุฃุฎูููุ<br><strong>ูุญูุฏ</strong></p>
        </div>
        <div class="wall-container" id="wall-container"></div>
    </div>

    <button id="open-form-btn" title="ุฃุถู ุฑุณุงูุฉ">+</button>

    <div id="form-panel" class="form-panel">
        <button id="close-form-btn" title="ุฅุบูุงู">X</button>
        <header>
            <h1>ุดุงุฑู ุจูููุฉ ุญููุฉ</h1>
        </header>
        <main>
            <form id="gratitude-form">
                <input type="text" id="name" placeholder="ุงุณูู (ุงุฎุชูุงุฑู)">
                <div class="textarea-toolbar">
                    <button type="button" class="emoji-btn" id="emoji-btn">๐</button>
                </div>
                <textarea id="message" rows="10" placeholder="ุงูุชุจ ุฑุณุงูุฉ ุดูุฑ ุฃู ุฐูุฑู ุฌูููุฉ..." required></textarea>
                <emoji-picker></emoji-picker>
                <fieldset class="privacy-options">
                    <legend>ุฎูุงุฑ ุงูุนุฑุถ</legend>
                    <div><input type="radio" id="public" name="privacy" value="public" checked><label for="public">ุนุฑุถ ููุฌููุน</label></div>
                    <div><input type="radio" id="private" name="privacy" value="private"><label for="private">ุฑุณุงูุฉ ุฎุงุตุฉ ูู</label></div>
                </fieldset>
                <button type="submit">ุนููู ุฑุณุงูุชู</button>
            </form>
        </main>
    </div>

    <div id="action-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="modal-title">ุชุฃููุฏ ุงูุฅุฌุฑุงุก</h3>
            <p id="modal-text">ูุฅุชูุงู ูุฐุง ุงูุฅุฌุฑุงุกุ ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ.</p>
            <input type="password" id="password-input" placeholder="ูููุฉ ุงููุฑูุฑ">
            <div class="modal-buttons">
                <button id="confirm-action-btn">ุชุฃููุฏ</button>
                <button id="cancel-action-btn">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <div id="notification-area"></div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"></script>

    <script>
        const ADMIN_PASSWORD = 'delete2024';
        const firebaseConfig = {
            apiKey: "AIzaSyC0t2n854hE32yrc7mnxYSpsX3QTkjGtqk",
            authDomain: "gratitude-wall-e4183.firebaseapp.com",
            projectId: "gratitude-wall-e4183",
            storageBucket: "gratitude-wall-e4183.firebasestorage.app",
            messagingSenderId: "472636926451",
            appId: "1:472636926451:web:687dcb8db4f024a3f24a86",
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // ุจุงูู ุงูุฃููุงุฏ ูู ุงูุชุนุงูู ูุน ุงููููุฐุฌุ ุงูุฑูุณุงูุฒุ ุงูุฅูุดุงุกุ ุงูุญุฐูุ ูุงููุดู...
        // ูุฏููุฌุฉ ูููุง ูู ุณูุฑูุจุช ูุงุญุฏ ูู ุงููู ุนูุฏู

        // ูุซุงู: ุฅุฑุณุงู ุงููููุฐุฌ
        const form = document.getElementById('gratitude-form');
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('name').value.trim();
            const message = document.getElementById('message').value.trim();
            const privacy = document.querySelector('input[name="privacy"]:checked').value;

            if (!message) {
                alert("ูู ูุถูู ุงูุชุจ ุฑุณุงูุฉ");
                return;
            }

            db.collection('notes').add({
                author: name,
                message: message,
                isPublic: privacy === 'public',
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            }).then(() => {
                alert("ุชู ุงูุฅุฑุณุงู ุจูุฌุงุญ");
                form.reset();
            }).catch((err) => alert("ุญุฏุซ ุฎุทุฃ"));
        });

        // ูููุฐุง ุจุงูู ุงูุณูุฑูุจุช ูู ููุฏ ุงูุฌุฏุงุฑ ุงูุชูุงุนูู
    </script>
</body>
</html>
